<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/martial.html}">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>Process-tâches edition</title>
<script th:src="@{/js/jquery.scrollTo.min.js}"></script>
<link href="http://www.jqueryscript.net/css/jquerysctipttop.css"
	rel="stylesheet" type="text/css">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/1.0.1/svg.min.js"
	th:src="@{/js/svg.js}"></script>
<script th:src="@{/js/flowsvg.js}"></script>
</head>
<body>
	<div class="container-fluid" layout:fragment="content">
		<!-- Page Heading -->
		<div th:replace="fragments/main_content_heading::heading(heading_text='Tâche-edition')"></div>
		<!-- row content -->
			<div class="row" th:if="${task}">
				<div class="col-sm-12 col-md-6 offset-md-3">
					<div class="card">
						<div class="card-header bg-info text-white">
							<h5>
								<span th:if="${task.id}" th:text="${' Mise à jour de la tâche : '+task.name+' de la section ' + task.section.name+' du processus '+task.section.process.label}">Mise à jour d'une tâche</span> 
								<span th:if="!${task.id}" th:text="${'Nouvelle tâche de la section '+task.section.name+' du process : '+task.section.process.label}">Nouveau process</span>
								<a th:href="@{/Process/Task/Edit(sid=${param.sid})}" th:if="${task.id}" class="btn-floating waves-effect waves-light d-inline-block float-right"><i class="material-icons">+</i></a>
							</h5>
						</div>
						<div class="card-body pb-0">
							<form th:action="@{/Process/Task/Edit(sid=${param.sid})}" th:object="${task}" method="post" class="mshz-form-validate pb-0">
								<input type="hidden" th:field="*{id}"/>
								<!-- <input type="hidden" th:field="*{section}"/> -->
								<div class="row p-0">
									<div class="col-sm-12 col-md-12 p-0">
										<div class="row">
											<div th:if="${errorMsg}" class="col-sm-12">
												<div class="text-center" th:replace="fragments/alert::flash-danger(body=${errorMsg})"></div>
											</div>
											<div th:if="${successMsg}" class="col-sm-12"> 
												<div class="text-center" th:replace="fragments/alert::flash-success(body=${successMsg})"></div>
											</div>
											<div class="form-group col-sm-12" th:if="${sections.size()>0}">
												 <select th:field="*{section}" class="from-control form-control-sm">
												 <option th:each="sect : ${sections}" th:value="${sect.id}" th:text="${sect.name}"></option>
											    </select>
											</div>
											<div class="form-group col-sm-12">
												<input type="text" name="label" th:field="*{name}" placeholder="Entrez le libellé ou le nom de la tâche.."
												class="form-control form-control-sm" data-mshz-required="true"/>
												<div class="invalid-feedback">Donnez un nom à la tâche !</div>
											</div>
											<div class="form-group col-sm-12 col-md-6"> 
												 <select th:field="*{type}" class="from-control form-control-sm">
												 <option value="process">Choisissez le type de la tâche</option>
											      <option value="start">Debut</option>
											      <option value="process">Process</option>
											      <option value="sub_process">Sous-process</option>
											      <option value="doc">Document</option>
											      <option value="decision">Décision</option>
											      <option value="finish">Fin</option>
											    </select>
											</div>
											<div class="form-group col-sm-12 col-md-6"> 
												 <select th:field="*{status}" class="from-control form-control-sm">
												 <option value="valid">Séléctionner un status de la tâche</option>
											      <option value="valid">Traitable</option>
											      <option value="canceled">Non traitable</option>
											      <option value="completed">Traitée</option>
											    </select>
											</div>
											<div class="form-group col-sm-12 col-md-12" th:if="${tasks.size()>0}"> 
												 <select th:field="*{parent}" class="from-control form-control-sm">
												 <option th:value="${tasks.get(0).id}">Choisissez la tâche parente</option>
											      <option th:each="t: ${tasks}" th:value="${t.id}" th:text="${t.name}">Tache parente</option>
											    </select>
											</div>
											<div class="form-group col-sm-12 mb-0">
												<button type="submit" class="btn btn-sm btn-outline-info float-right">Enregistrer</button>
											</div>
										</div>
									</div>
									<!-- col  --
									<div class="col-sm-12 col-md-6">
										<div class="row">
											<div class="form-group col-sm-12 input-field">
												 <select th:field="*{noProcessId}" class="from-control form-control-sm">
											      <option value="">Séléctionnez les intervenant du process</option>
											      <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.firstname + ' '+user.lastname}"></option>
											    </select>
											</div>
										</div>
									</div>
									end col emps -->
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		<!-- row content -->
	</div>
	<div layout:fragment="addon-scripts-content">
		<!-- <script type="text/javascript" th:src="@{/js/logigramme.js}"></script> -->
	</div>
</body>
</html>
